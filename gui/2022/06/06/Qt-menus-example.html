<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Qt Menus Example | Cool Wind on Study</title>
<meta name="generator" content="Jekyll v4.2.2">
<meta property="og:title" content="Qt Menus Example">
<meta name="author" content="CoolWind">
<meta property="og:locale" content="en_US">
<meta name="description" content='Reference Links Qt Documentation - Menus Example Qt Source code - Menus Example Menus Example How menus can be used in a main window application Menu widget can be either a pull-down menu in a menu bar or Pull-down menus are shown by the menu bar when the user clicks on the respective item or presses the specified shortcut key. a standalone context menu. Context menus are usually invoked by some special keyboard key or by right-clicking. A menu consists of a list of action items. -In applications, many common commands can be invoked via menus, toolbar buttons as well as keyboard shortcuts. Since the user expects the commands to be performed in the same way, regardless of the user interface used, it is useful to represent each command as an action. The Menus example consists of one single class, MainWidow, derived from the QMainWindow class. When choosing one of the action items in our application, it will display the item’s path in its central widget. MainWindow Class Definition QMainWindow class provides a main application window, with a menu bar, tool bars, dock widgets and a status bar around a large central widget. class MainWindow : public QMainWindow { Q_OBJECT public: MainWindow(); protected: #ifndef QT_NO_CONTEXTMENU void contextMenuEvent(QContextMenuEvent *event) override; #endif // QT_NO_CONTEXTMENU In this example, we will see how to implement pull-down menus as well as a context menu. In order to implement a custom context menu we must reimplement QWidget’s contextMenuEvent() function to receive the context menu events for our main window. private slots: void newFile(); void open(); void save(); void print(); void undo(); void redo(); void cut(); void copy(); void paste(); void bold(); void italic(); void leftAlign(); void rightAlign(); void justify(); void center(); void setLineSpacing(); void setParagraphSpacing(); void about(); void aboutQt(); We must also implement a collection of private slots to respond to the user activating any of our menu entries. Note that these slots are left out of this documentation since they are trivial, i.e. most of them are only displaying the actions’s path in the main window’s central widget. private: void createActions(); void createMenus(); simplify the constructor by implementing two private convenience functions to create the various actions, to add them to menus and to insert the menus into our main window’s menu bar. QMenu* fileMenu_; QMenu* editMenu_; QMenu* formatMenu_; QMenu* helpMenu_; QActionGroup* alignmentGroup_; QAction* newAct_; QAction* openAct_; QAction* saveAct_; QAction* printAct_; QAction* exitAct_; QAction* undoAct_; QAction* redoAct_; QAction* cutAct_; QAction* copyAct_; QAction* pasteAct_; QAction* boldAct_; QAction* italicAct_; QAction* leftAlignAct_; QAction* rightAlignAct_; QAction* justifyAct_; QAction* centerAct_; QAction* setLineSpacingAct_; QAction* setParagraphSpacingAct_; QAction* aboutAct_; QAction* aboutQtAct_; QLabel* infoLabel_; Finally, we declare the various menus and actions as well as a simple information label in the application wide scope. The QMenu class provides a menu widget for use in menu bars, context menus, and other popup menus while the QAction class provides an abstract UI action that can be inserted into widgets. In some situations it is useful to group actions together, e.g., we have a Left Align actions, a Right Align action, a Justify action, and a Center action, and we want only one of these actions to be active at any one time. One simple way of achieving this is to group the actions together in an action group using the QActionGroup class. MainWindow Class Implementation In the constructor, we start off by creating a regular QWidget and make it our main window’s central widget. Note that the main window takes ownership of the widget pointer and deletes it at the appropriate time. MainWindow::MainWindow() { QWidget* widget = new QWidget; setCentralWidget(widget); QWidget* topFiller = new QWidget; topFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); infoLabel_ = new QLabel(tr("&lt;i&gt;Choose a menu option, or right-click to " "invoke a context menu&lt;/i&gt;")); infoLabel_-&gt;setFrameStyle(QFrame::StyledPanel | QFrame::Sunken); infoLabel_-&gt;setAlignment(Qt::AlignCenter); QWidget* bottomFiller = new QWidget; bottomFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); QVBoxLayout* layout = new QVBoxLayout; layout-&gt;setContentsMargins(5, 5, 5, 5); layout-&gt;addWidget(topFiller); layout-&gt;addWidget(infoLabel_); layout-&gt;addWidget(bottomFiller); widget-&gt;setLayout(layout); Then we create the information label as well as a top and bottom filler that we add to a layout which we install on the central widget. QMainWindow objects come with their own customized layout Followings are considered as errors. setting a layout on a the actual main window, or creating a layout with a main window as a parent You should always set your own layout on the central widget instead. createActions(); createMenus(); QString message = tr("A context menu is available by right-clicking"); statusBar()-&gt;showMessage(message); setWindowTitle("Menus Example"); setMinimumSize(160, 160); resize(480, 320); } QMainWindow’s statusBar(){target=”_blank”} function returns the status bar for the main window (if the status bar does not exist, this function will create and return an empty status bar). We initialize the status bar and window title, resize the window to an appropriate size as well as ensure that the main window cannot be resized to a smaller size than the given one. void MainWindow::createActions() { newAct_ = new QAction(tr("&amp;New"), this); newAct_-&gt;setShortcuts(QKeySequence::New); newAct_-&gt;setStatusTip(tr("Create a new file")); connect(newAct_, &amp;QAction::triggered, this, &amp;MainWindow::newFile); ... ... A QAction object may contain an icon, a text, a shortcut, a status tip, a “What’s this?” text, and a tooltip. Most of these can be set in the constructor, but they can also be set independently using the provided convenience functions. In the createActions() function, we first create a newAct action. We make Ctrl+N its shortcut using the QAction::setShortcut() function, and we set its status tip using QAction::setStatusTip() function (the status tip is displayed on all status bars provided by the actions’s top-level parent widget). We also connect its triggered() signal to the newFile() slot. The rest of the actions are created in a similar manner. alignmentGroup_ = new QActionGroup(this); alignmentGroup_-&gt;addAction(leftAlignAct_); alignmentGroup_-&gt;addAction(rightAlignAct_); alignmentGroup_-&gt;addAction(justifyAct_); alignmentGroup_-&gt;addAction(centerAct_); leftAlignAct_-&gt;setCheckable(true); } Once we have created the Left Align, Right Align, Justify, and a Center actions, we can also create the previously mentioned action group. Each action is added to the group using QActionGroup’s addAction() function. Note that an action also can be added to a group by creating it with the group as its parent. Since an action group is exclusive by default, only one of the actions in the group is checked at any one time (this can be altered using the QActionGroup::setExclusive() function). When all the actions are created, we use the createMenus() function to add the actions to the menus and to insert the menus into the menu bar: void MainWindow::createMenus() { fileMenu_ = menuBar()-&gt;addMenu(tr("&amp;File")); fileMenu_-&gt;addAction(newAct_); fileMenu_-&gt;addAction(openAct_); fileMenu_-&gt;addAction(saveAct_); fileMenu_-&gt;addAction(printAct_); fileMenu_-&gt;addSeparator(); fileMenu_-&gt;addAction(exitAct_); editMenu_ = menuBar()-&gt;addMenu(tr("&amp;Edit")); editMenu_-&gt;addAction(undoAct_); editMenu_-&gt;addAction(redoAct_); editMenu_-&gt;addSeparator(); editMenu_-&gt;addAction(cutAct_); editMenu_-&gt;addAction(copyAct_); editMenu_-&gt;addAction(pasteAct_); editMenu_-&gt;addSeparator(); QMenuBar’s addMenu() function appends a new QMenu with the given title, to the menu bar (note that the menu bar takes ownership of the menu). We use QWidget’s addAction() function to add each action to the corresponding menu. Alternatively, the QMenu class provides several addAction() convenience functions that create and add new actions from given texts and/or icons. You can also provide a member that will automatically connect to the new action’s triggered() signal, and a shortcut represented by a QKeySequence instance. The QMenu::addSeparator() function creates and returns a new separator action, i.e. an action for which QMenu::isSeparator() returns true, and adds the new action to the menu’s list of actions. formatMenu_ = editMenu_-&gt;addMenu(tr("&amp;Format")); formatMenu_-&gt;addAction(boldAct_); formatMenu_-&gt;addAction(italicAct_); formatMenu_-&gt;addSeparator()-&gt;setText(tr("Alignment")); formatMenu_-&gt;addAction(leftAlignAct_); formatMenu_-&gt;addAction(rightAlignAct_); formatMenu_-&gt;addAction(justifyAct_); formatMenu_-&gt;addAction(centerAct_); formatMenu_-&gt;addSeparator(); formatMenu_-&gt;addAction(setLineSpacingAct_); formatMenu_-&gt;addAction(setParagraphSpacingAct_); Note the Format menu It is added as a submenu to the Edit Menu using QMenu’s addMenu function. Take a look at the alignment actions: In the createActions() function we added the leftAlignAct, rightAlignAct, justifyAct and centerAct actions to an action group. Nevertheless, we must add each action to the menu separately while the action group does its magic behind the scene. #ifndef QT_NO_CONTEXTMENU void MainWindow::contextMenuEvent(QContextMenuEvent* event) { QMenu menu(this); menu.addAction(cutAct_); menu.addAction(copyAct_); menu.addAction(pasteAct_); menu.exec(event-&gt;globalPos()); } #endif // QT_NO_CONTEXTMENU To provide a custom context menu, we must reimplement QWidget’s contextMenuEvent() function to receive the widget’s context menu events. Whenever we receive such an event, we create a menu containing the Cut, Copy and Paste actions, Context menus can be executed either asynchronously using the popup() function or synchronously using the exec() function. By passing the event’s position as argument, we ensure that the context menu appears at the expected position.'>
<meta property="og:description" content='Reference Links Qt Documentation - Menus Example Qt Source code - Menus Example Menus Example How menus can be used in a main window application Menu widget can be either a pull-down menu in a menu bar or Pull-down menus are shown by the menu bar when the user clicks on the respective item or presses the specified shortcut key. a standalone context menu. Context menus are usually invoked by some special keyboard key or by right-clicking. A menu consists of a list of action items. -In applications, many common commands can be invoked via menus, toolbar buttons as well as keyboard shortcuts. Since the user expects the commands to be performed in the same way, regardless of the user interface used, it is useful to represent each command as an action. The Menus example consists of one single class, MainWidow, derived from the QMainWindow class. When choosing one of the action items in our application, it will display the item’s path in its central widget. MainWindow Class Definition QMainWindow class provides a main application window, with a menu bar, tool bars, dock widgets and a status bar around a large central widget. class MainWindow : public QMainWindow { Q_OBJECT public: MainWindow(); protected: #ifndef QT_NO_CONTEXTMENU void contextMenuEvent(QContextMenuEvent *event) override; #endif // QT_NO_CONTEXTMENU In this example, we will see how to implement pull-down menus as well as a context menu. In order to implement a custom context menu we must reimplement QWidget’s contextMenuEvent() function to receive the context menu events for our main window. private slots: void newFile(); void open(); void save(); void print(); void undo(); void redo(); void cut(); void copy(); void paste(); void bold(); void italic(); void leftAlign(); void rightAlign(); void justify(); void center(); void setLineSpacing(); void setParagraphSpacing(); void about(); void aboutQt(); We must also implement a collection of private slots to respond to the user activating any of our menu entries. Note that these slots are left out of this documentation since they are trivial, i.e. most of them are only displaying the actions’s path in the main window’s central widget. private: void createActions(); void createMenus(); simplify the constructor by implementing two private convenience functions to create the various actions, to add them to menus and to insert the menus into our main window’s menu bar. QMenu* fileMenu_; QMenu* editMenu_; QMenu* formatMenu_; QMenu* helpMenu_; QActionGroup* alignmentGroup_; QAction* newAct_; QAction* openAct_; QAction* saveAct_; QAction* printAct_; QAction* exitAct_; QAction* undoAct_; QAction* redoAct_; QAction* cutAct_; QAction* copyAct_; QAction* pasteAct_; QAction* boldAct_; QAction* italicAct_; QAction* leftAlignAct_; QAction* rightAlignAct_; QAction* justifyAct_; QAction* centerAct_; QAction* setLineSpacingAct_; QAction* setParagraphSpacingAct_; QAction* aboutAct_; QAction* aboutQtAct_; QLabel* infoLabel_; Finally, we declare the various menus and actions as well as a simple information label in the application wide scope. The QMenu class provides a menu widget for use in menu bars, context menus, and other popup menus while the QAction class provides an abstract UI action that can be inserted into widgets. In some situations it is useful to group actions together, e.g., we have a Left Align actions, a Right Align action, a Justify action, and a Center action, and we want only one of these actions to be active at any one time. One simple way of achieving this is to group the actions together in an action group using the QActionGroup class. MainWindow Class Implementation In the constructor, we start off by creating a regular QWidget and make it our main window’s central widget. Note that the main window takes ownership of the widget pointer and deletes it at the appropriate time. MainWindow::MainWindow() { QWidget* widget = new QWidget; setCentralWidget(widget); QWidget* topFiller = new QWidget; topFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); infoLabel_ = new QLabel(tr("&lt;i&gt;Choose a menu option, or right-click to " "invoke a context menu&lt;/i&gt;")); infoLabel_-&gt;setFrameStyle(QFrame::StyledPanel | QFrame::Sunken); infoLabel_-&gt;setAlignment(Qt::AlignCenter); QWidget* bottomFiller = new QWidget; bottomFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); QVBoxLayout* layout = new QVBoxLayout; layout-&gt;setContentsMargins(5, 5, 5, 5); layout-&gt;addWidget(topFiller); layout-&gt;addWidget(infoLabel_); layout-&gt;addWidget(bottomFiller); widget-&gt;setLayout(layout); Then we create the information label as well as a top and bottom filler that we add to a layout which we install on the central widget. QMainWindow objects come with their own customized layout Followings are considered as errors. setting a layout on a the actual main window, or creating a layout with a main window as a parent You should always set your own layout on the central widget instead. createActions(); createMenus(); QString message = tr("A context menu is available by right-clicking"); statusBar()-&gt;showMessage(message); setWindowTitle("Menus Example"); setMinimumSize(160, 160); resize(480, 320); } QMainWindow’s statusBar(){target=”_blank”} function returns the status bar for the main window (if the status bar does not exist, this function will create and return an empty status bar). We initialize the status bar and window title, resize the window to an appropriate size as well as ensure that the main window cannot be resized to a smaller size than the given one. void MainWindow::createActions() { newAct_ = new QAction(tr("&amp;New"), this); newAct_-&gt;setShortcuts(QKeySequence::New); newAct_-&gt;setStatusTip(tr("Create a new file")); connect(newAct_, &amp;QAction::triggered, this, &amp;MainWindow::newFile); ... ... A QAction object may contain an icon, a text, a shortcut, a status tip, a “What’s this?” text, and a tooltip. Most of these can be set in the constructor, but they can also be set independently using the provided convenience functions. In the createActions() function, we first create a newAct action. We make Ctrl+N its shortcut using the QAction::setShortcut() function, and we set its status tip using QAction::setStatusTip() function (the status tip is displayed on all status bars provided by the actions’s top-level parent widget). We also connect its triggered() signal to the newFile() slot. The rest of the actions are created in a similar manner. alignmentGroup_ = new QActionGroup(this); alignmentGroup_-&gt;addAction(leftAlignAct_); alignmentGroup_-&gt;addAction(rightAlignAct_); alignmentGroup_-&gt;addAction(justifyAct_); alignmentGroup_-&gt;addAction(centerAct_); leftAlignAct_-&gt;setCheckable(true); } Once we have created the Left Align, Right Align, Justify, and a Center actions, we can also create the previously mentioned action group. Each action is added to the group using QActionGroup’s addAction() function. Note that an action also can be added to a group by creating it with the group as its parent. Since an action group is exclusive by default, only one of the actions in the group is checked at any one time (this can be altered using the QActionGroup::setExclusive() function). When all the actions are created, we use the createMenus() function to add the actions to the menus and to insert the menus into the menu bar: void MainWindow::createMenus() { fileMenu_ = menuBar()-&gt;addMenu(tr("&amp;File")); fileMenu_-&gt;addAction(newAct_); fileMenu_-&gt;addAction(openAct_); fileMenu_-&gt;addAction(saveAct_); fileMenu_-&gt;addAction(printAct_); fileMenu_-&gt;addSeparator(); fileMenu_-&gt;addAction(exitAct_); editMenu_ = menuBar()-&gt;addMenu(tr("&amp;Edit")); editMenu_-&gt;addAction(undoAct_); editMenu_-&gt;addAction(redoAct_); editMenu_-&gt;addSeparator(); editMenu_-&gt;addAction(cutAct_); editMenu_-&gt;addAction(copyAct_); editMenu_-&gt;addAction(pasteAct_); editMenu_-&gt;addSeparator(); QMenuBar’s addMenu() function appends a new QMenu with the given title, to the menu bar (note that the menu bar takes ownership of the menu). We use QWidget’s addAction() function to add each action to the corresponding menu. Alternatively, the QMenu class provides several addAction() convenience functions that create and add new actions from given texts and/or icons. You can also provide a member that will automatically connect to the new action’s triggered() signal, and a shortcut represented by a QKeySequence instance. The QMenu::addSeparator() function creates and returns a new separator action, i.e. an action for which QMenu::isSeparator() returns true, and adds the new action to the menu’s list of actions. formatMenu_ = editMenu_-&gt;addMenu(tr("&amp;Format")); formatMenu_-&gt;addAction(boldAct_); formatMenu_-&gt;addAction(italicAct_); formatMenu_-&gt;addSeparator()-&gt;setText(tr("Alignment")); formatMenu_-&gt;addAction(leftAlignAct_); formatMenu_-&gt;addAction(rightAlignAct_); formatMenu_-&gt;addAction(justifyAct_); formatMenu_-&gt;addAction(centerAct_); formatMenu_-&gt;addSeparator(); formatMenu_-&gt;addAction(setLineSpacingAct_); formatMenu_-&gt;addAction(setParagraphSpacingAct_); Note the Format menu It is added as a submenu to the Edit Menu using QMenu’s addMenu function. Take a look at the alignment actions: In the createActions() function we added the leftAlignAct, rightAlignAct, justifyAct and centerAct actions to an action group. Nevertheless, we must add each action to the menu separately while the action group does its magic behind the scene. #ifndef QT_NO_CONTEXTMENU void MainWindow::contextMenuEvent(QContextMenuEvent* event) { QMenu menu(this); menu.addAction(cutAct_); menu.addAction(copyAct_); menu.addAction(pasteAct_); menu.exec(event-&gt;globalPos()); } #endif // QT_NO_CONTEXTMENU To provide a custom context menu, we must reimplement QWidget’s contextMenuEvent() function to receive the widget’s context menu events. Whenever we receive such an event, we create a menu containing the Cut, Copy and Paste actions, Context menus can be executed either asynchronously using the popup() function or synchronously using the exec() function. By passing the event’s position as argument, we ensure that the context menu appears at the expected position.'>
<link rel="canonical" href="coolwindjo.github.io/gui/2022/06/06/Qt-menus-example.html">
<meta property="og:url" content="coolwindjo.github.io/gui/2022/06/06/Qt-menus-example.html">
<meta property="og:site_name" content="Cool Wind on Study">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-06-06T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Qt Menus Example">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"CoolWind"},"dateModified":"2022-06-06T00:00:00+00:00","datePublished":"2022-06-06T00:00:00+00:00","description":"Reference Links Qt Documentation - Menus Example Qt Source code - Menus Example Menus Example How menus can be used in a main window application Menu widget can be either a pull-down menu in a menu bar or Pull-down menus are shown by the menu bar when the user clicks on the respective item or presses the specified shortcut key. a standalone context menu. Context menus are usually invoked by some special keyboard key or by right-clicking. A menu consists of a list of action items. -In applications, many common commands can be invoked via menus, toolbar buttons as well as keyboard shortcuts. Since the user expects the commands to be performed in the same way, regardless of the user interface used, it is useful to represent each command as an action. The Menus example consists of one single class, MainWidow, derived from the QMainWindow class. When choosing one of the action items in our application, it will display the item’s path in its central widget. MainWindow Class Definition QMainWindow class provides a main application window, with a menu bar, tool bars, dock widgets and a status bar around a large central widget. class MainWindow : public QMainWindow { Q_OBJECT public: MainWindow(); protected: #ifndef QT_NO_CONTEXTMENU void contextMenuEvent(QContextMenuEvent *event) override; #endif // QT_NO_CONTEXTMENU In this example, we will see how to implement pull-down menus as well as a context menu. In order to implement a custom context menu we must reimplement QWidget’s contextMenuEvent() function to receive the context menu events for our main window. private slots: void newFile(); void open(); void save(); void print(); void undo(); void redo(); void cut(); void copy(); void paste(); void bold(); void italic(); void leftAlign(); void rightAlign(); void justify(); void center(); void setLineSpacing(); void setParagraphSpacing(); void about(); void aboutQt(); We must also implement a collection of private slots to respond to the user activating any of our menu entries. Note that these slots are left out of this documentation since they are trivial, i.e. most of them are only displaying the actions’s path in the main window’s central widget. private: void createActions(); void createMenus(); simplify the constructor by implementing two private convenience functions to create the various actions, to add them to menus and to insert the menus into our main window’s menu bar. QMenu* fileMenu_; QMenu* editMenu_; QMenu* formatMenu_; QMenu* helpMenu_; QActionGroup* alignmentGroup_; QAction* newAct_; QAction* openAct_; QAction* saveAct_; QAction* printAct_; QAction* exitAct_; QAction* undoAct_; QAction* redoAct_; QAction* cutAct_; QAction* copyAct_; QAction* pasteAct_; QAction* boldAct_; QAction* italicAct_; QAction* leftAlignAct_; QAction* rightAlignAct_; QAction* justifyAct_; QAction* centerAct_; QAction* setLineSpacingAct_; QAction* setParagraphSpacingAct_; QAction* aboutAct_; QAction* aboutQtAct_; QLabel* infoLabel_; Finally, we declare the various menus and actions as well as a simple information label in the application wide scope. The QMenu class provides a menu widget for use in menu bars, context menus, and other popup menus while the QAction class provides an abstract UI action that can be inserted into widgets. In some situations it is useful to group actions together, e.g., we have a Left Align actions, a Right Align action, a Justify action, and a Center action, and we want only one of these actions to be active at any one time. One simple way of achieving this is to group the actions together in an action group using the QActionGroup class. MainWindow Class Implementation In the constructor, we start off by creating a regular QWidget and make it our main window’s central widget. Note that the main window takes ownership of the widget pointer and deletes it at the appropriate time. MainWindow::MainWindow() { QWidget* widget = new QWidget; setCentralWidget(widget); QWidget* topFiller = new QWidget; topFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); infoLabel_ = new QLabel(tr(&quot;&lt;i&gt;Choose a menu option, or right-click to &quot; &quot;invoke a context menu&lt;/i&gt;&quot;)); infoLabel_-&gt;setFrameStyle(QFrame::StyledPanel | QFrame::Sunken); infoLabel_-&gt;setAlignment(Qt::AlignCenter); QWidget* bottomFiller = new QWidget; bottomFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding); QVBoxLayout* layout = new QVBoxLayout; layout-&gt;setContentsMargins(5, 5, 5, 5); layout-&gt;addWidget(topFiller); layout-&gt;addWidget(infoLabel_); layout-&gt;addWidget(bottomFiller); widget-&gt;setLayout(layout); Then we create the information label as well as a top and bottom filler that we add to a layout which we install on the central widget. QMainWindow objects come with their own customized layout Followings are considered as errors. setting a layout on a the actual main window, or creating a layout with a main window as a parent You should always set your own layout on the central widget instead. createActions(); createMenus(); QString message = tr(&quot;A context menu is available by right-clicking&quot;); statusBar()-&gt;showMessage(message); setWindowTitle(&quot;Menus Example&quot;); setMinimumSize(160, 160); resize(480, 320); } QMainWindow’s statusBar(){target=”_blank”} function returns the status bar for the main window (if the status bar does not exist, this function will create and return an empty status bar). We initialize the status bar and window title, resize the window to an appropriate size as well as ensure that the main window cannot be resized to a smaller size than the given one. void MainWindow::createActions() { newAct_ = new QAction(tr(&quot;&amp;New&quot;), this); newAct_-&gt;setShortcuts(QKeySequence::New); newAct_-&gt;setStatusTip(tr(&quot;Create a new file&quot;)); connect(newAct_, &amp;QAction::triggered, this, &amp;MainWindow::newFile); ... ... A QAction object may contain an icon, a text, a shortcut, a status tip, a “What’s this?” text, and a tooltip. Most of these can be set in the constructor, but they can also be set independently using the provided convenience functions. In the createActions() function, we first create a newAct action. We make Ctrl+N its shortcut using the QAction::setShortcut() function, and we set its status tip using QAction::setStatusTip() function (the status tip is displayed on all status bars provided by the actions’s top-level parent widget). We also connect its triggered() signal to the newFile() slot. The rest of the actions are created in a similar manner. alignmentGroup_ = new QActionGroup(this); alignmentGroup_-&gt;addAction(leftAlignAct_); alignmentGroup_-&gt;addAction(rightAlignAct_); alignmentGroup_-&gt;addAction(justifyAct_); alignmentGroup_-&gt;addAction(centerAct_); leftAlignAct_-&gt;setCheckable(true); } Once we have created the Left Align, Right Align, Justify, and a Center actions, we can also create the previously mentioned action group. Each action is added to the group using QActionGroup’s addAction() function. Note that an action also can be added to a group by creating it with the group as its parent. Since an action group is exclusive by default, only one of the actions in the group is checked at any one time (this can be altered using the QActionGroup::setExclusive() function). When all the actions are created, we use the createMenus() function to add the actions to the menus and to insert the menus into the menu bar: void MainWindow::createMenus() { fileMenu_ = menuBar()-&gt;addMenu(tr(&quot;&amp;File&quot;)); fileMenu_-&gt;addAction(newAct_); fileMenu_-&gt;addAction(openAct_); fileMenu_-&gt;addAction(saveAct_); fileMenu_-&gt;addAction(printAct_); fileMenu_-&gt;addSeparator(); fileMenu_-&gt;addAction(exitAct_); editMenu_ = menuBar()-&gt;addMenu(tr(&quot;&amp;Edit&quot;)); editMenu_-&gt;addAction(undoAct_); editMenu_-&gt;addAction(redoAct_); editMenu_-&gt;addSeparator(); editMenu_-&gt;addAction(cutAct_); editMenu_-&gt;addAction(copyAct_); editMenu_-&gt;addAction(pasteAct_); editMenu_-&gt;addSeparator(); QMenuBar’s addMenu() function appends a new QMenu with the given title, to the menu bar (note that the menu bar takes ownership of the menu). We use QWidget’s addAction() function to add each action to the corresponding menu. Alternatively, the QMenu class provides several addAction() convenience functions that create and add new actions from given texts and/or icons. You can also provide a member that will automatically connect to the new action’s triggered() signal, and a shortcut represented by a QKeySequence instance. The QMenu::addSeparator() function creates and returns a new separator action, i.e. an action for which QMenu::isSeparator() returns true, and adds the new action to the menu’s list of actions. formatMenu_ = editMenu_-&gt;addMenu(tr(&quot;&amp;Format&quot;)); formatMenu_-&gt;addAction(boldAct_); formatMenu_-&gt;addAction(italicAct_); formatMenu_-&gt;addSeparator()-&gt;setText(tr(&quot;Alignment&quot;)); formatMenu_-&gt;addAction(leftAlignAct_); formatMenu_-&gt;addAction(rightAlignAct_); formatMenu_-&gt;addAction(justifyAct_); formatMenu_-&gt;addAction(centerAct_); formatMenu_-&gt;addSeparator(); formatMenu_-&gt;addAction(setLineSpacingAct_); formatMenu_-&gt;addAction(setParagraphSpacingAct_); Note the Format menu It is added as a submenu to the Edit Menu using QMenu’s addMenu function. Take a look at the alignment actions: In the createActions() function we added the leftAlignAct, rightAlignAct, justifyAct and centerAct actions to an action group. Nevertheless, we must add each action to the menu separately while the action group does its magic behind the scene. #ifndef QT_NO_CONTEXTMENU void MainWindow::contextMenuEvent(QContextMenuEvent* event) { QMenu menu(this); menu.addAction(cutAct_); menu.addAction(copyAct_); menu.addAction(pasteAct_); menu.exec(event-&gt;globalPos()); } #endif // QT_NO_CONTEXTMENU To provide a custom context menu, we must reimplement QWidget’s contextMenuEvent() function to receive the widget’s context menu events. Whenever we receive such an event, we create a menu containing the Cut, Copy and Paste actions, Context menus can be executed either asynchronously using the popup() function or synchronously using the exec() function. By passing the event’s position as argument, we ensure that the context menu appears at the expected position.","headline":"Qt Menus Example","mainEntityOfPage":{"@type":"WebPage","@id":"coolwindjo.github.io/gui/2022/06/06/Qt-menus-example.html"},"url":"coolwindjo.github.io/gui/2022/06/06/Qt-menus-example.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" href="/assets/images/cls.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="coolwindjo.github.io/feed.xml" title="Cool Wind on Study">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="Cool Wind on Study" src="/assets/images/cls.png" onerror="this.style.display='none'">
  Cool Wind on Study
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/tags.html">TAGS</a>









<span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Qt Menus Example</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2022-06-06T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jun 06, 2022
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 9 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#qt">#qt</a><a class="post-tag" href="/tags.html#menu">#menu</a><a class="post-tag" href="/tags.html#qt-example">#qt-example</a>
</div></header>
<article class="post h-entry" itemscope itemtype="https://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="reference-links">Reference Links</h2>

<ul>
  <li><a href="https://doc.qt.io/qt-5/qtwidgets-mainwindows-menus-example.html" target="_blank">Qt Documentation - Menus Example</a></li>
  <li><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/mainwindows/menus" target="_blank">Qt Source code - Menus Example</a></li>
</ul>

<h2 id="menus-example">Menus Example</h2>

<ul>
  <li>How menus can be used in a main window application</li>
  <li>Menu widget can be either
    <ul>
      <li>a pull-down menu in a menu bar or
        <ul>
          <li>Pull-down menus are shown by the menu bar when the user clicks on the respective item or presses the specified shortcut key.</li>
        </ul>
      </li>
      <li>a standalone context menu.
        <ul>
          <li>Context menus are usually invoked by some special keyboard key or by right-clicking.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><img src="/assets/images/posts/2022-06-06/menu_example.png" alt="menu_example"></p>

<ul>
  <li>A menu consists of a list of action items.
-In applications, many common commands can be invoked via menus, toolbar buttons as well as keyboard shortcuts.
    <ul>
      <li>Since the user expects the commands to be performed in the same way, regardless of the user interface used,
        <ul>
          <li>it is useful to represent each command as an action.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The Menus example consists of one single class, MainWidow, derived from the <a href="https://doc.qt.io/qt-5/qmainwindow.html" target="_blank">QMainWindow</a> class.
    <ul>
      <li>When choosing one of the action items in our application, it will display the item’s path in its central widget.</li>
    </ul>
  </li>
</ul>

<h3 id="mainwindow-class-definition">MainWindow Class Definition</h3>

<ul>
  <li>
<a href="https://doc.qt.io/qt-5/qmainwindow.html" target="_blank">QMainWindow</a> class provides a main application window, with a menu bar, tool bars, dock widgets and a status bar around a large central widget.</li>
</ul>

<pre><code class="language-mainwindow.h">class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    MainWindow();

protected:
#ifndef QT_NO_CONTEXTMENU
    void contextMenuEvent(QContextMenuEvent *event) override;
#endif // QT_NO_CONTEXTMENU
</code></pre>

<ul>
  <li>In this example, we will see how to implement pull-down menus as well as a context menu.
    <ul>
      <li>In order to implement a custom context menu we must reimplement <a href="https://doc.qt.io/qt-5/qwidget.html" target="_blank">QWidget</a>’s <a href="https://doc.qt.io/qt-5/qwidget.html#contextMenuEvent" target="_blank">contextMenuEvent()</a> function to receive the context menu events for our main window.</li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.h">private slots:
    void newFile();
    void open();
    void save();
    void print();
    void undo();
    void redo();
    void cut();
    void copy();
    void paste();
    void bold();
    void italic();
    void leftAlign();
    void rightAlign();
    void justify();
    void center();
    void setLineSpacing();
    void setParagraphSpacing();
    void about();
    void aboutQt();
</code></pre>

<ul>
  <li>We must also implement a collection of private slots to respond to the user activating any of our menu entries.
    <ul>
      <li>Note that these slots are left out of this documentation since they are trivial,</li>
      <li>i.e. most of them are only displaying the actions’s path in the main window’s central widget.</li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.h">private:
    void createActions();
    void createMenus();
</code></pre>

<ul>
  <li>simplify the constructor by implementing two private convenience functions
    <ul>
      <li>to create the various actions,</li>
      <li>to add them to menus</li>
      <li>and to insert the menus into our main window’s menu bar.</li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.h">    QMenu* fileMenu_;
    QMenu* editMenu_;
    QMenu* formatMenu_;
    QMenu* helpMenu_;
    QActionGroup* alignmentGroup_;
    QAction* newAct_;
    QAction* openAct_;
    QAction* saveAct_;
    QAction* printAct_;
    QAction* exitAct_;
    QAction* undoAct_;
    QAction* redoAct_;
    QAction* cutAct_;
    QAction* copyAct_;
    QAction* pasteAct_;
    QAction* boldAct_;
    QAction* italicAct_;
    QAction* leftAlignAct_;
    QAction* rightAlignAct_;
    QAction* justifyAct_;
    QAction* centerAct_;
    QAction* setLineSpacingAct_;
    QAction* setParagraphSpacingAct_;
    QAction* aboutAct_;
    QAction* aboutQtAct_;
    QLabel* infoLabel_;
</code></pre>

<ul>
  <li>Finally, we declare the various menus and actions as well as a simple information label in the application wide scope.</li>
  <li>The <a href="https://doc.qt.io/qt-5/qmenu.html" target="_blank">QMenu</a> class provides a menu widget for use in
    <ul>
      <li>menu bars,</li>
      <li>context menus,</li>
      <li>and other popup menus</li>
    </ul>
  </li>
  <li>while the <a href="https://doc.qt.io/qt-5/qaction.html" target="_blank">QAction</a> class provides an abstract UI action that can be inserted into widgets.</li>
  <li>In some situations it is useful to group actions together,
    <ul>
      <li>e.g., we have a Left Align actions, a Right Align action, a Justify action, and a Center action, and we want only one of these actions to be active at any one time.</li>
      <li>One simple way of achieving this is to group the actions together in an action group using the <a href="https://doc.qt.io/qt-5/qactiongroup.html" target="_blank">QActionGroup</a> class.</li>
    </ul>
  </li>
</ul>

<h3 id="mainwindow-class-implementation">MainWindow Class Implementation</h3>

<ul>
  <li>In the constructor, we start off by creating a regular QWidget and make it our main window’s central widget.
    <ul>
      <li>Note that the main window takes ownership of the widget pointer and deletes it at the appropriate time.</li>
    </ul>

    <pre><code class="language-mainwindow.cpp">MainWindow::MainWindow()
{
  QWidget* widget = new QWidget;
  setCentralWidget(widget);

  QWidget* topFiller = new QWidget;
  topFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);

  infoLabel_ = new QLabel(tr("&lt;i&gt;Choose a menu option, or right-click to "
                            "invoke a context menu&lt;/i&gt;"));
  infoLabel_-&gt;setFrameStyle(QFrame::StyledPanel | QFrame::Sunken);
  infoLabel_-&gt;setAlignment(Qt::AlignCenter);

  QWidget* bottomFiller = new QWidget;
  bottomFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);

  QVBoxLayout* layout = new QVBoxLayout;
  layout-&gt;setContentsMargins(5, 5, 5, 5);
  layout-&gt;addWidget(topFiller);
  layout-&gt;addWidget(infoLabel_);
  layout-&gt;addWidget(bottomFiller);
  widget-&gt;setLayout(layout);
</code></pre>
  </li>
  <li>Then we create the information label as well as a top and bottom filler that we add to a layout which we install on the central widget.</li>
  <li>
<a href="https://doc.qt.io/qt-5/qmainwindow.html" target="_blank">QMainWindow</a> objects come with their own customized layout
    <ul>
      <li>Followings are considered as errors.
        <ul>
          <li>setting a layout on a the actual main window,</li>
          <li>or creating a layout with a main window as a parent</li>
        </ul>
      </li>
      <li>You should always set your own layout on the central widget instead.</li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.cpp">    createActions();
    createMenus();

    QString message = tr("A context menu is available by right-clicking");
    statusBar()-&gt;showMessage(message);

    setWindowTitle("Menus Example");
    setMinimumSize(160, 160);
    resize(480, 320);
}
</code></pre>

<ul>
  <li>
<a href="https://doc.qt.io/qt-5/qmainwindow.html" target="_blank">QMainWindow</a>’s <a href="https://doc.qt.io/qt-5/qmainwindow.html#statusBar">statusBar()</a>{target=”_blank”} function returns the status bar for the main window (if the status bar does not exist, this function will create and return an empty status bar).
    <ul>
      <li>We initialize the status bar and window title, resize the window to an appropriate size as well as ensure that the main window cannot be resized to a smaller size than the given one.</li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.cpp">void MainWindow::createActions()
{
    newAct_ = new QAction(tr("&amp;New"), this);
    newAct_-&gt;setShortcuts(QKeySequence::New);
    newAct_-&gt;setStatusTip(tr("Create a new file"));
    connect(newAct_, &amp;QAction::triggered, this, &amp;MainWindow::newFile);
    ...
    ...
</code></pre>

<ul>
  <li>A <a href="https://doc.qt.io/qt-5/qaction.html" target="_blank">QAction</a> object may contain
    <ul>
      <li>an icon,</li>
      <li>a text,</li>
      <li>a shortcut,</li>
      <li>a status tip,</li>
      <li>a “What’s this?” text,</li>
      <li>and a tooltip.</li>
    </ul>
  </li>
  <li>
    <p>Most of these can be set in the constructor, but they can also be set independently using the provided convenience functions.</p>
  </li>
  <li>In the createActions() function,
    <ul>
      <li>we first create a newAct action.
        <ul>
          <li>We make <strong>Ctrl+N</strong> its shortcut using the <a href="https://doc.qt.io/qt-5/qaction.html#shortcut-prop" target="_blank">QAction::setShortcut()</a> function,</li>
          <li>and we set its status tip using <a href="https://doc.qt.io/qt-5/qaction.html#statusTip-prop" target="_blank">QAction::setStatusTip()</a> function (the status tip is displayed on all status bars provided by the actions’s top-level parent widget).</li>
          <li>We also connect its <a href="https://doc.qt.io/qt-5/qaction.html#triggered" target="_blank">triggered()</a> signal to the newFile() slot.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The rest of the actions are created in a similar manner.</li>
</ul>

<pre><code class="language-mainwindow.cpp">    alignmentGroup_ = new QActionGroup(this);
    alignmentGroup_-&gt;addAction(leftAlignAct_);
    alignmentGroup_-&gt;addAction(rightAlignAct_);
    alignmentGroup_-&gt;addAction(justifyAct_);
    alignmentGroup_-&gt;addAction(centerAct_);
    leftAlignAct_-&gt;setCheckable(true);
}
</code></pre>

<ul>
  <li>
    <p>Once we have created the <strong>Left Align, Right Align, Justify,</strong> and a <strong>Center</strong> actions, we can also create the previously mentioned action group.</p>
  </li>
  <li>Each action is added to the group using <a href="https://doc.qt.io/qt-5/qactiongroup.html" target="_blank">QActionGroup</a>’s <a href="https://doc.qt.io/qt-5/qactiongroup.html#addAction" target="_blank">addAction()</a> function.
    <ul>
      <li>Note that an action also can be added to a group by creating it with the group as its parent.
        <ul>
          <li>Since an action group is exclusive by default, only one of the actions in the group is checked at any one time
            <ul>
              <li>(this can be altered using the <a href="https://doc.qt.io/qt-5/qactiongroup.html#setExclusive" target="_blank">QActionGroup::setExclusive()</a> function).</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>When all the actions are created, we use the createMenus() function to add the actions to the menus and to insert the menus into the menu bar:</li>
</ul>

<pre><code class="language-mainwindow.cpp">void MainWindow::createMenus()
{
    fileMenu_ = menuBar()-&gt;addMenu(tr("&amp;File"));
    fileMenu_-&gt;addAction(newAct_);
    fileMenu_-&gt;addAction(openAct_);
    fileMenu_-&gt;addAction(saveAct_);
    fileMenu_-&gt;addAction(printAct_);
    fileMenu_-&gt;addSeparator();
    fileMenu_-&gt;addAction(exitAct_);

    editMenu_ = menuBar()-&gt;addMenu(tr("&amp;Edit"));
    editMenu_-&gt;addAction(undoAct_);
    editMenu_-&gt;addAction(redoAct_);
    editMenu_-&gt;addSeparator();
    editMenu_-&gt;addAction(cutAct_);
    editMenu_-&gt;addAction(copyAct_);
    editMenu_-&gt;addAction(pasteAct_);
    editMenu_-&gt;addSeparator();
</code></pre>

<ul>
  <li>
<a href="https://doc.qt.io/qt-5/qmenubar.html" target="_blank">QMenuBar</a>’s <a href="https://doc.qt.io/qt-5/qmenubar.html#addMenu" target="_blank">addMenu()</a> function appends a new <a href="https://doc.qt.io/qt-5/qmenu.html" target="_blank">QMenu</a> with the given title, to the menu bar
    <ul>
      <li>(note that the menu bar takes ownership of the menu).</li>
      <li>We use <a href="https://doc.qt.io/qt-5/qwidget.html" target="_blank">QWidget</a>’s <a href="https://doc.qt.io/qt-5/qwidget.html#addAction" target="_blank">addAction()</a> function to add each action to the corresponding menu.
        <ul>
          <li>Alternatively, the <a href="https://doc.qt.io/qt-5/qmenu.html" target="_blank">QMenu</a> class provides several <a href="https://doc.qt.io/qt-5/qmenu.html#addAction" target="_blank">addAction()</a> convenience functions that create and add new actions from given texts and/or icons.
            <ul>
              <li>You can also provide a member that will automatically connect to
                <ul>
                  <li>the new action’s <a href="https://doc.qt.io/qt-5/qaction.html#triggered" target="_blank">triggered()</a> signal,</li>
                  <li>and a shortcut represented by a <a href="https://doc.qt.io/qt-5/qkeysequence.html" target="_blank">QKeySequence</a> instance.</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The <a href="https://doc.qt.io/qt-5/qmenu.html#addSeparator" target="_blank">QMenu::addSeparator()</a> function creates and returns a new separator action,
    <ul>
      <li>i.e. an action for which <a href="https://doc.qt.io/qt-5/qaction.html#isSeparator">QMenu::isSeparator()</a> returns true,</li>
      <li>and adds the new action to the menu’s list of actions.</li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.cpp">    formatMenu_ = editMenu_-&gt;addMenu(tr("&amp;Format"));
    formatMenu_-&gt;addAction(boldAct_);
    formatMenu_-&gt;addAction(italicAct_);
    formatMenu_-&gt;addSeparator()-&gt;setText(tr("Alignment"));
    formatMenu_-&gt;addAction(leftAlignAct_);
    formatMenu_-&gt;addAction(rightAlignAct_);
    formatMenu_-&gt;addAction(justifyAct_);
    formatMenu_-&gt;addAction(centerAct_);
    formatMenu_-&gt;addSeparator();
    formatMenu_-&gt;addAction(setLineSpacingAct_);
    formatMenu_-&gt;addAction(setParagraphSpacingAct_);
</code></pre>

<ul>
  <li>Note the <strong>Format</strong> menu
    <ul>
      <li>It is added as a submenu to the <strong>Edit</strong> Menu using <a href="https://doc.qt.io/qt-5/qmenu.html" target="_blank">QMenu</a>’s <a href="https://doc.qt.io/qt-5/qmenu.html#addMenu" target="_blank">addMenu</a> function.</li>
      <li>Take a look at the alignment actions: In the createActions() function we added the <strong>leftAlignAct, rightAlignAct, justifyAct and centerAct</strong> actions to an action group.
        <ul>
          <li>Nevertheless, we must add each action to the menu separately while the action group does its magic behind the scene.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<pre><code class="language-mainwindow.cpp">#ifndef QT_NO_CONTEXTMENU
void MainWindow::contextMenuEvent(QContextMenuEvent* event)
{
    QMenu menu(this);
    menu.addAction(cutAct_);
    menu.addAction(copyAct_);
    menu.addAction(pasteAct_);
    menu.exec(event-&gt;globalPos());
}
#endif	// QT_NO_CONTEXTMENU
</code></pre>

<ul>
  <li>To provide a custom context menu, we must reimplement <a href="https://doc.qt.io/qt-5/qwidget.html" target="_blank">QWidget</a>’s <a href="https://doc.qt.io/qt-5/qwidget.html#contextMenuEvent" target="_blank">contextMenuEvent()</a> function to receive the widget’s context menu events.</li>
  <li>Whenever we receive such an event, we create a menu containing the <strong>Cut, Copy</strong> and <strong>Paste</strong> actions,
    <ul>
      <li>Context menus can be executed either asynchronously using the <a href="https://doc.qt.io/qt-5/qmenu.html#popup" target="_blank">popup()</a> function or synchronously using the <a href="https://doc.qt.io/qt-5/qmenu.html#exec" target="_blank">exec()</a> function.</li>
    </ul>
  </li>
  <li>By passing the event’s position as argument, we ensure that the context menu appears at the expected position.</li>
</ul>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/gui/2022/05/17/Qt-meta-object.html" title="Qt Meta Object">Qt Meta Object</a><a class="next" href="/gui/2022/06/20/Qt-notepad-example.html" title="Qt Notepad Example">Qt Notepad Example</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/linux/2020/12/07/memory-management.html" title="Qt Notepad Example">Linux Memory Management</a></li>
<li><a class="post-link" href="/scripts/2021/11/20/dind-and-dood-for-jenkins.html" title="Qt Notepad Example">Docker in Docker and Docker out of Docker for Jenkins</a></li>
<li><a class="post-link" href="/ros/2020/12/11/simulator-comparison.html" title="Qt Notepad Example">Comparison of Simulators for Robotics and Self-driving Vehicles</a></li>
<li><a class="post-link" href="/raspberrypi/2020/10/24/raspberrypi4-sensors.html" title="Qt Notepad Example">Sensors for Raspberry Pi</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>2019-2022 @ CoolWind coolwind@hotmail.co.kr All rights reserved. Powered by <a href="https://jekyllrb.com/">Jekyll</a>
</div>
      <!-- <div>2019-{currentYear} @ {author} coolwind@hotmail.co.kr All rights reserved. Powered by <a href="https://jekyllrb.com/">Jekyll</a> <a href=https://github.com/coolwindjo/coolwindjo.github.io>@CoolWind</a></div> -->
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
